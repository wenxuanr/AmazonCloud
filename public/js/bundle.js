!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);var n={accessKey:"",secretKey:"",S3Bucket:"chatsystem",region:"us-east-2",sessionToken:"",client_id:"29in8mli5sgf980g6mult1n3hb",user_pool_id:"us-east-2_i3HCJbZlh",cognito_domain_url:"https://ai-driven-wenxuan.auth.us-east-2.amazoncognito.com",redirect_uri:"https://s3.us-east-2.amazonaws.com/chatsystem/index.html",identity_pool_id:"us-east-2:c6290702-ec70-4468-8cdd-271b8299482e"},a={newClient:function(e){var t={};void 0===e&&(e={accessKey:n.accessKey,secretKey:n.secretKey,sessionToken:n.sessionToken,region:n.region,apiKey:void 0,defaultContentType:"application/json",defaultAcceptType:"application/json"}),void 0===e.accessKey&&(e.accessKey=""),void 0===e.secretKey&&(e.secretKey=""),void 0===e.apiKey&&(e.apiKey=""),void 0===e.sessionToken&&(e.sessionToken=""),void 0===e.region&&(e.region="us-east-1"),void 0===e.defaultContentType&&(e.defaultContentType="application/json"),void 0===e.defaultAcceptType&&(e.defaultAcceptType="application/json");var o="https://izwj0sx3ba.execute-api.us-east-2.amazonaws.com/prod",a=/(^https?:\/\/[^\/]+)/g.exec(o)[1],s=o.substring(a.length),c={accessKey:e.accessKey,secretKey:e.secretKey,sessionToken:e.sessionToken,serviceName:"execute-api",region:e.region,endpoint:a,defaultContentType:e.defaultContentType,defaultAcceptType:e.defaultAcceptType},i="NONE";void 0!==c.accessKey&&""!==c.accessKey&&void 0!==c.secretKey&&""!==c.secretKey&&(i="AWS_IAM");var r={endpoint:a,defaultContentType:e.defaultContentType,defaultAcceptType:e.defaultAcceptType},d=apiGateway.core.apiGatewayClientFactory.newClient(r,c);return t.chatbotPost=function(t,o,n){void 0===n&&(n={}),apiGateway.core.utils.assertParametersDefined(t,["body"],["body"]);var a={verb:"post".toUpperCase(),path:s+uritemplate("/chatbot").expand(apiGateway.core.utils.parseParametersToObject(t,[])),headers:apiGateway.core.utils.parseParametersToObject(t,[]),queryParams:apiGateway.core.utils.parseParametersToObject(t,[]),body:o};return d.makeRequest(a,i,n,e.apiKey)},t.chatbotOptions=function(t,o,n){void 0===n&&(n={}),apiGateway.core.utils.assertParametersDefined(t,[],["body"]);var a={verb:"options".toUpperCase(),path:s+uritemplate("/chatbot").expand(apiGateway.core.utils.parseParametersToObject(t,[])),headers:apiGateway.core.utils.parseParametersToObject(t,[]),queryParams:apiGateway.core.utils.parseParametersToObject(t,[]),body:o};return d.makeRequest(a,i,n,e.apiKey)},t}},s=[],c="",i="",r="Chatbot";let d={};var l=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&"),console.log(e);var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return console.log(o),o?o[2]?(console.log(o[2]),decodeURIComponent(o[2].replace(/\+/g," "))):"":null};console.log(l("code"));function u(){""!=document.getElementById("chatbox").value&&function(){!0,i="I'm confused",c=document.getElementById("chatbox").value,document.getElementById("chatbox").value="",s.push(c);var e={userInput:c};d.chatbotPost({},e,{}).then(function(e){console.log("success");const t=e.data.body.databack;i=t,console.log(i),s.push("<b>"+r+":</b> "+i);for(var o=1;o<8;o++)s[s.length-o]&&(document.getElementById("chatlog"+o).innerHTML=s[s.length-o])}).catch(function(e){console.log("error")}),"name"===c&&(i="My name is "+r)}()}!function({auth_code:e=l("code"),client_id:t=n.client_id,identity_pool_id:o=n.identity_pool_id,aws_region:s=n.region,user_pool_id:c=n.user_pool_id,cognito_domain_url:i=n.cognito_domain_url,redirect_uri:r=n.redirect_uri}){new Promise((l,u)=>{var p={url:`${i}/oauth2/token`,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{grant_type:"authorization_code",client_id:t,redirect_uri:r,code:e}};$.ajax(p).done(function(e){console.log("oauth2 token call responded"),e.id_token?(AWS.config.region||AWS.config.update({region:s}),AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:o,Logins:{[`cognito-idp.${s}.amazonaws.com/${c}`]:e.id_token}}),AWS.config.credentials.refresh(e=>{e?u(e):(console.log("successfully logged in"),n.secretKey=AWS.config.credentials.secretAccessKey,n.accessKey=AWS.config.credentials.accessKeyId,n.sessionToken=AWS.config.credentials.sessionToken,d=a.newClient(n),l(AWS.config.credentials))})):u(e)})})}(2),document.onkeypress=function(e){var t=e||window.event,o=t.keyCode||t.which;13!=o&&3!=o||u();38==o&&console.log("hi")}}]);